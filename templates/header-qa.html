<!doctype html>
<html lang="{{page.lang | default: 'nl'}}" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Basic Page Meta -->
    <title>{{page.title | default: 'DigestPaper Q&A'}}</title>
    <meta name="description" content="{{page.description | default: 'DigestPaper vragen en antwoorden: community-gedreven discussies over veiligheid, privacy en transparantie.'}}" />
    <meta name="keywords" content="{{page.keywords | join: ', ' | default: 'vragen, antwoorden, forum, discussie, community'}}" />

    <!-- Canonical and Language -->
    <link rel="canonical" href="{{page.canonical_url | default: page.url | prepend: site.url}}" />
    <meta name="language" content="{{page.lang | default: 'nl-NL'}}" />

    <!-- Open Graph -->
    <meta property="og:type" content="article" />
    <meta property="og:title" content="{{page.title}}" />
    <meta property="og:description" content="{{page.description}}" />
    <meta property="og:url" content="{{page.canonical_url | default: page.url | prepend: site.url}}" />
    <meta property="og:site_name" content="DigestPaper" />
    <meta property="og:locale" content="{{page.lang | default: 'nl_NL'}}" />
    <meta property="og:image" content="{{site.url}}/favicon/nebula-clean-icon-512.png" />

    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="{{page.title}}" />
    <meta name="twitter:description" content="{{page.description}}" />
    <meta name="twitter:image" content="{{site.url}}/favicon/nebula-clean-icon-512.png" />

    <!-- JSON-LD: QAPage for Rich Results -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@graph": [
          {
            "@type": "NewsMediaOrganization",
            "@id": "{{site.url}}/#org",
            "name": "DigestPaper",
            "url": "{{site.url}}/",
            "logo": {
              "@type": "ImageObject",
              "url": "{{site.url}}/favicon/nebula-clean-icon-512.png",
              "width": 512,
              "height": 512
            }
          },
          {
            "@type": "QAPage",
            "@id": "{{page.canonical_url | default: page.url | prepend: site.url}}/#qapage",
            "url": "{{page.canonical_url | default: page.url | prepend: site.url}}",
            "name": "{{page.title}}",
            "description": "{{page.description}}",
            "inLanguage": "{{page.lang | default: 'nl-NL'}}",
            "isPartOf": {
              "@type": "WebSite",
              "@id": "{{site.url}}/#website"
            },
            "publisher": { "@id": "{{site.url}}/#org" },
            "datePublished": "{{page.date_published | default: page.date | default: site.time | date: '%Y-%m-%dT%H:%M:%S%z'}}",
            "dateModified": "{{page.date_modified | default: page.date | default: site.time | date: '%Y-%m-%dT%H:%M:%S%z'}}",
            "mainEntity": {
              "@type": "Question",
              "name": "{{page.question | default: page.title}}",
              "text": "{{page.question_text | default: page.description}}",
              {% if page.question_author %}
              "author": {
                "@type": "Person",
                "name": "{{page.question_author.name | default: page.question_author}}"
                {% if page.question_author.url %}
                ,"url": "{{page.question_author.url}}"
                {% endif %}
              },
              {% endif %}
              "dateCreated": "{{page.question_date | default: page.date | default: site.time | date: '%Y-%m-%dT%H:%M:%S%z'}}",
              "answerCount": {{page.answer_count | default: 1}},
              {% if page.accepted_answer %}
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "{{page.accepted_answer.text | strip_html}}",
                {% if page.accepted_answer.author %}
                "author": {
                  "@type": "Person",
                  "name": "{{page.accepted_answer.author.name | default: page.accepted_answer.author}}"
                  {% if page.accepted_answer.author.url %}
                  ,"url": "{{page.accepted_answer.author.url}}"
                  {% endif %}
                },
                {% endif %}
                "dateCreated": "{{page.accepted_answer.date | default: page.date | default: site.time | date: '%Y-%m-%dT%H:%M:%S%z'}}",
                {% if page.accepted_answer.upvotes %}
                "upvoteCount": {{page.accepted_answer.upvotes}},
                {% endif %}
                "url": "{{page.canonical_url | default: page.url | prepend: site.url}}#accepted-answer"
              },
              {% endif %}
              {% if page.suggested_answers %}
              "suggestedAnswer": [
                {% for answer in page.suggested_answers %}
                {
                  "@type": "Answer",
                  "text": "{{answer.text | strip_html}}",
                  {% if answer.author %}
                  "author": {
                    "@type": "Person",
                    "name": "{{answer.author.name | default: answer.author}}"
                    {% if answer.author.url %}
                    ,"url": "{{answer.author.url}}"
                    {% endif %}
                  },
                  {% endif %}
                  "dateCreated": "{{answer.date | default: page.date | default: site.time | date: '%Y-%m-%dT%H:%M:%S%z'}}",
                  {% if answer.upvotes %}
                  "upvoteCount": {{answer.upvotes}},
                  {% endif %}
                  "url": "{{page.canonical_url | default: page.url | prepend: site.url}}#answer-{{forloop.index}}"
                }{% unless forloop.last %},{% endunless %}
                {% endfor %}
              ]
              {% endif %}
            }
          }
        ]
      }
    </script>
  </head>

  <body{% if page.body_class %} class="{{page.body_class}}"{% endif %}{% if page.microdata_itemscope %} {{page.microdata_itemscope}}{% else %} itemscope itemtype="https://schema.org/QAPage"{% endif %}>
    <!-- Body content will be inserted here by the template engine -->
  </body>
</html>
