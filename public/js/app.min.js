const firebaseConfig={apiKey:"AIzaSyD4L4yGM63ZAhY9vpVHAlDfYka9qdAqGA4",authDomain:"botanic-wiki-static-v1.firebaseapp.com",projectId:"botanic-wiki-static-v1",storageBucket:"botanic-wiki-static-v1.firebasestorage.app",messagingSenderId:"1071998750169",appId:"1:1071998750169:web:58ee90a1037b5cb4bb9dc8",measurementId:"G-S20D4FG0BE"},firestoreConfig={apiKey:"AIzaSyDCRYKrWUvtOtDAY4TThjlm7AxkzHG-62s",authDomain:"blockchainkix-com-fy.firebaseapp.com",projectId:"blockchainkix-com-fy",storageBucket:"blockchainkix-com-fy.firebasestorage.app",messagingSenderId:"148890561425",appId:"1:148890561425:web:7cba0e7477141e3a880830"};window.firebaseReady=null,window.firebaseApp=null,window.firebaseAuth=null,window.firebaseAnalytics=null,window.initFirebase=async()=>(window.firebaseReady||(console.log("[Firebase] User requested Firebase - loading modules..."),window.firebaseReady=(async()=>{try{const{initializeApp:e}=await import("https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js");window.firebaseApp=e(firebaseConfig);const{getAuth:t}=await import("https://www.gstatic.com/firebasejs/12.2.1/firebase-auth.js");window.firebaseAuth=t(window.firebaseApp);let n="inactive";try{const{getAnalytics:e,isSupported:t}=await import("https://www.gstatic.com/firebasejs/12.2.1/firebase-analytics.js");await t()?(window.firebaseAnalytics=e(window.firebaseApp),n="active",console.info("[Analytics] ✅ Google Analytics loaded")):n="unsupported"}catch(e){n="skipped",console.info("[Analytics] ⚠️ Analytics skipped:",e.message)}window.initFirestore=async()=>{if(!window.firebaseFirestore)try{const{getFirestore:e,initializeApp:t}=await import("https://www.gstatic.com/firebasejs/12.2.1/firebase-firestore.js"),n=t(firestoreConfig,"firestoreApp");window.firebaseFirestore=e(n),console.log("[Firestore] ✅ Loaded successfully")}catch(e){throw console.error("[Firestore] ❌ Load failed:",e),e}return window.firebaseFirestore},window.getConnectivityStatus=()=>({firebase:!!window.firebaseApp,firestore:!!window.firebaseFirestore,analytics:n,online:navigator.onLine,timestamp:(new Date).toISOString()});const i=window.getConnectivityStatus();return console.log("[Firebase] ✅ Modules loaded successfully"),console.log("[System] 🚀 Initialization complete:",{firebase:i.firebase?"✅":"❌",firestore:i.firestore?"✅":"❌",analytics:"active"===i.analytics?"✅":"skipped"===i.analytics?"⚠️":"unsupported"===i.analytics?"🚫":"❌",online:i.online?"✅":"❌"}),!0}catch(e){return console.error("[Firebase] ❌ Load failed:",e),!1}})()),window.firebaseReady),function(){const e=document.getElementById("darkModeToggle"),t=document.getElementById("darkModeIcon");if(!e)return;const n=e=>{document.body.classList.toggle("dark-mode",e),document.documentElement.classList.toggle("dark",e),document.documentElement.dataset.theme=e?"dark":"light",t&&(t.className=e?"fas fa-sun":"fas fa-moon"),localStorage.setItem("darkMode",e?"dark":"light")},i=localStorage.getItem("darkMode"),a=window.matchMedia("(prefers-color-scheme: dark)");n(i?"dark"===i:a.matches),e.addEventListener("click",()=>n(!document.body.classList.contains("dark-mode"))),a.addEventListener("change",e=>{localStorage.getItem("darkMode")||n(e.matches)})}(),window.addEventListener("online",()=>{console.info("[Network] 🌐 Connection restored")}),window.addEventListener("offline",()=>{console.warn("[Network] 📡 Connection lost - some features may be limited")}),window.checkConnectivity=()=>{const e=window.getConnectivityStatus?.()||{error:"Not initialized"};return console.table(e),e},document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("mobileMenuToggle"),t=document.getElementById("mobileNav"),n=document.getElementById("scrollTop");if(e&&t?(console.log("🍔 Mobile menu elements found"),e.addEventListener("click",function(){console.log("🍔 Mobile menu toggle clicked");const e="true"===this.getAttribute("aria-expanded");this.setAttribute("aria-expanded",!e),e?(t.setAttribute("hidden",""),t.setAttribute("aria-hidden","true"),console.log("🍔 Menu closed")):(t.removeAttribute("hidden"),t.setAttribute("aria-hidden","false"),console.log("🍔 Menu opened")),this.classList.toggle("active",!e)}),document.addEventListener("click",function(n){t.contains(n.target)||e.contains(n.target)||(e.setAttribute("aria-expanded","false"),t.setAttribute("hidden",""),t.setAttribute("aria-hidden","true"),e.classList.remove("active"))}),document.addEventListener("keydown",function(n){"Escape"===n.key&&"true"===e.getAttribute("aria-expanded")&&(e.setAttribute("aria-expanded","false"),t.setAttribute("hidden",""),t.setAttribute("aria-hidden","true"),e.classList.remove("active"),e.focus())})):console.log("❌ Mobile menu elements not found:",{toggle:!!e,nav:!!t}),n){let a=0,o=!1,s=!1;const r=300;function i(){s=!1;const e=a>r;e!==o&&(o=e,n.style.display=o?"inline-flex":"none")}window.addEventListener("scroll",()=>{a=window.pageYOffset||document.documentElement.scrollTop||0,s||(s=!0,requestAnimationFrame(i))},{passive:!0}),n.addEventListener("click",e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}),a=window.pageYOffset||document.documentElement.scrollTop||0,i()}}),document.addEventListener("DOMContentLoaded",async()=>{!function(){const e=document.querySelector(".flasher-content");e&&w(e)}(),function(){const e=document.getElementById("categories-container"),t=document.getElementById("articles-container");e&&y(e);t&&(t.innerHTML='\n        <div class="no-articles">\n          <i class="fas fa-newspaper fa-3x"></i>\n          <h3>Geen artikelen gevonden</h3>\n          <p>Er zijn nog geen recente artikelen beschikbaar.</p>\n        </div>')}();document.getElementById("news-flash-content"),document.getElementById("categories-container"),document.getElementById("articles-container"),document.getElementById("tags-container");const e=document.getElementById("loginBtn"),t=(document.getElementById("logoutBtn"),document.getElementById("authModal")),n=document.getElementById("closeModal"),i=document.getElementById("loginForm"),a=document.getElementById("registerForm"),o=document.querySelectorAll(".form-tab"),s=document.getElementById("authError"),r=(document.getElementById("userLoggedIn"),document.getElementById("userLoggedOut"),document.getElementById("userAvatar"),document.getElementById("userName"),document.getElementById("userWidgetTitle"),document.getElementById("headerLogin")),c=document.getElementById("headerLogout"),l=document.getElementById("headerUserAdmin"),d=(document.getElementById("headerUserName"),document.getElementById("googleLoginBtn")),u=document.getElementById("googleRegisterBtn"),g=(e,t=document)=>t.querySelector(e);function m(){t&&(t.style.display="none",i?.reset(),a?.reset(),s&&(s.style.display="none"))}function f(e){o.forEach(t=>t.classList.toggle("active",t.dataset.tab===e));const t="login"===e;requestAnimationFrame(()=>{i&&(i.style.display=t?"block":"none"),a&&(a.style.display=t?"none":"block")}),g(".modal-title").textContent=t?"Inloggen":"Registreren"}function w(e){if(!e)return;const t=[{title:"Twee verdachten aangehouden na gewapende overval in Amsterdam-Zuid",category:"Politie"},{title:"Politie waarschuwt voor nieuwe oplichtingstruc via WhatsApp",category:"Veiligheid"},{title:"Vermist meisje (8) gezocht in Amsterdam-Noord",category:"Politie"},{title:"Grote drugsvangst in Rotterdamse haven",category:"Politie"},{title:"Inbraakgolf in Eindhoven: politie zoekt getuigen",category:"Veiligheid"}],n={Politie:"#icon-politie-nl",Veiligheid:"#icon-shield-halved",Cybersecurity:"#icon-cybersecurity-ai",Nieuws:"#icon-het-nieuws",Juridisch:"#icon-gavel",Onderzoek:"#icon-onderzoek-portaal",Tech:"#icon-headlines-magazine",default:"#icon-digestpaper"};e.innerHTML="";const i=document.createElement("div");i.className="news-ticker",t.forEach((e,a)=>{const o=document.createElement("span");o.className="news-item";const s=(e.category||"").trim(),r=n[s]||n.default,c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttribute("width","16"),c.setAttribute("height","16"),c.setAttribute("role","img"),c.setAttribute("aria-hidden","true"),c.classList.add("news-item-icon");const l=document.createElementNS("http://www.w3.org/2000/svg","use");l.setAttribute("href",r),c.appendChild(l),setTimeout(()=>{window.SVGIconEnhancer&&window.SVGIconEnhancer.enhanceSpecificIcon(c)},0);const d=document.createElement("span");if(d.textContent=e.title,d.className="news-item-text",o.appendChild(c),o.appendChild(d),i.appendChild(o),a<t.length-1){const e=document.createElement("span");e.className="news-separator",e.textContent=" • ",i.appendChild(e)}}),i.innerHTML+=i.innerHTML,e.appendChild(i),requestAnimationFrame(()=>{const t=.02*(i.scrollWidth/2);Object.assign(i.style,{animation:`ticker ${t}s linear infinite`,width:"max-content"}),e.style.overflow="hidden"})}o.forEach(e=>e.addEventListener("click",()=>{o.forEach(e=>e.classList.remove("active")),e.classList.add("active");const t="login"===e.dataset.tab;requestAnimationFrame(()=>{i&&(i.style.display=t?"block":"none"),a&&(a.style.display=t?"none":"block")}),g(".modal-title").textContent=t?"Inloggen":"Registreren"})),e?.addEventListener("click",()=>{t&&(t.style.display="block")}),r?.addEventListener("click",()=>{t&&(t.style.display="block")}),c?.addEventListener("click",async()=>{if(c){c.disabled=!0;try{if(window.firebaseAuth){const{signOut:e}=await import("https://www.gstatic.com/firebasejs/12.2.1/firebase-auth.js");await e(window.firebaseAuth)}}catch(e){console.error("Logout failed:",e)}finally{c.disabled=!1}}}),l?.addEventListener("dblclick",async e=>{if(e.preventDefault(),l&&confirm("Weet je zeker dat je wilt uitloggen?"))try{await signOut(auth)}catch(e){console.error("Logout failed:",e)}}),n?.addEventListener("click",m),window.addEventListener("click",e=>{e.target===t&&m()}),d?.addEventListener("click",async()=>{if(d){d.disabled=!0;try{await signInWithPopup(auth,new GoogleAuthProvider),m()}catch(e){console.error("Google login failed:",e),showAuthError("Google inloggen mislukt: "+(e?.message||e))}finally{d.disabled=!1}}}),u?.addEventListener("click",async()=>{if(u){u.disabled=!0;try{await signInWithPopup(auth,new GoogleAuthProvider),m()}catch(e){console.error("Google registration failed:",e),showAuthError("Google registratie mislukt: "+(e?.message||e))}finally{u.disabled=!1}}}),g("#showRegisterForm")?.addEventListener("click",e=>{e.preventDefault(),f("register")}),g("#showLoginForm")?.addEventListener("click",e=>{e.preventDefault(),f("login")}),i?.addEventListener("submit",async e=>{e.preventDefault();const t=g("#loginEmail").value,n=g("#loginPassword").value,a=i.querySelector('button[type="submit"]'),o=a.textContent;a.disabled=!0,a.innerHTML='<i class="fas fa-spinner fa-spin"></i> Firebase laden...',s&&(s.style.display="none");try{await window.initFirebase(),await window.setupAuthStateListener();const{signInWithEmailAndPassword:e}=await import("https://www.gstatic.com/firebasejs/12.2.1/firebase-auth.js");a.innerHTML='<i class="fas fa-spinner fa-spin"></i> Inloggen...';const i=await e(window.firebaseAuth,t,n);m(),updateUserUI(i.user),((...e)=>{try{window.firebaseAnalytics?import("https://www.gstatic.com/firebasejs/12.2.1/firebase-analytics.js").then(({logEvent:t})=>{t(window.firebaseAnalytics,...e)}).catch(()=>{console.info("[Analytics] 📊 Event skipped:",e[0])}):window._analyticsWarningLogged||(console.info("[Analytics] 📊 Event skipped - analytics unavailable:",e[0]),window._analyticsWarningLogged=!0)}catch(t){console.warn("[Analytics] Failed to log event:",e[0],t?.message||t)}})("login",{method:"email"})}catch(e){showAuthError(mapAuthError(e))}finally{a.disabled=!1,a.textContent=o}});const p=document.createElement("style");function y(e){if(!e)return;e.innerHTML="";[{id:"algemeen",name:"Algemene categorieën",icon:"icon-list-check"},{id:"actueel",name:"Actueel Nieuws",icon:"icon-politie-nl"}].forEach(t=>{const n=document.createElement("div");n.className="category";const i=document.createElement("div");i.className="category-header",i.innerHTML=`\n        <h3>\n          <svg width="40" height="40" role="img" aria-labelledby="category-${t.id}-title">\n            <title id="category-${t.id}-title">${t.name}</title>\n            <use href="#${t.icon}" fill="url(#icon-gradient)"></use>\n          </svg>\n          ${t.name}\n        </h3>\n        <i class="fas fa-chevron-down"></i>\n      `;const a=document.createElement("div");a.className="category-body","actueel"===t.id?(a.style.display="block",a.innerHTML=`\n          <div class="article featured-article">\n            <div class="featured-badge">Info</div>\n            <div class="article-content">\n              <div class="article-categories"><span class="article-category">Systeem</span></div>\n              <h3>Geen artikelen gevonden</h3>\n              <div class="article-meta">\n                <div class="article-date"><i class="far fa-calendar-alt"></i> ${(new Date).toLocaleDateString("nl-NL")}</div>\n                <div class="reading-time"><i class="far fa-clock"></i> 1 min leestijd</div>\n              </div>\n              <p>Er zijn nog geen artikelen beschikbaar of de verbinding met de database is verbroken.</p>\n              <div class="article-actions"><button class="read-more" onclick="location.reload()">Vernieuwen</button></div>\n            </div>\n          </div>`):a.innerHTML='\n          <div class="forum-section">\n            <div class="forum-section-link">\n              <div class="forum-icon"><i class="fas fa-bullhorn"></i></div>\n              <div class="forum-content">\n                <div class="forum-title">Geen secties gevonden</div>\n                <div class="forum-description">Er zijn nog geen forum secties beschikbaar.</div>\n                <div class="forum-stats">\n                  <div class="forum-stat"><i class="fas fa-comments"></i> 0 berichten</div>\n                  <div class="forum-stat"><i class="fas fa-file-alt"></i> 0 topics</div>\n                </div>\n              </div>\n              <div class="forum-latest"></div>\n            </div>\n          </div>',n.appendChild(i),n.appendChild(a),e.appendChild(n),i.addEventListener("click",()=>{const e="none"!==a.style.display;a.style.display=e?"none":"block";const t=i.querySelector("i");t.classList.toggle("fa-chevron-down",!e),t.classList.toggle("fa-chevron-right",e)})})}p.textContent="\n    .category-header h3 {\n      display: flex;\n      align-items: center;\n      gap: 0.5rem;\n      font-size: 1.125rem;\n      margin: 0;\n    }\n    .category-header h3 svg {\n      flex-shrink: 0;\n      vertical-align: middle;\n    }\n  ",document.head.appendChild(p)}),document.addEventListener("DOMContentLoaded",()=>{const e=e=>{document.querySelectorAll(e).forEach(e=>{e.addEventListener("mouseenter",()=>{e.querySelectorAll("svg use").forEach(e=>{const t=e.getAttribute("href");if(t){const e=t.substring(1),n=document.getElementById(e);if(n){n.querySelectorAll("path, circle, rect, polygon, g").forEach(e=>{e.dataset.originalFill||(e.dataset.originalFill=e.getAttribute("fill")||""),e.setAttribute("fill","white")})}}})}),e.addEventListener("mouseleave",()=>{e.querySelectorAll("svg use").forEach(e=>{const t=e.getAttribute("href");if(t){const e=t.substring(1),n=document.getElementById(e);if(n){n.querySelectorAll("path, circle, rect, polygon, g").forEach(e=>{e.dataset.originalFill&&e.setAttribute("fill",e.dataset.originalFill)})}}})})})};e(".cta"),e(".nav__link"),e(".dropdown__link"),e(".nav-trigger"),e(".nav-menu a");document.querySelectorAll(".portfolio-brand").forEach(e=>{e.addEventListener("mouseenter",()=>{const t="dark"===document.documentElement.dataset.theme;e.style.background=t?"rgba(64, 47, 80, 0.44)":"#fff",e.style.setProperty("background",t?"rgba(64, 47, 80, 0.44)":"#fff","important")}),e.addEventListener("mouseleave",()=>{e.style.background="",e.style.removeProperty("background")})})});